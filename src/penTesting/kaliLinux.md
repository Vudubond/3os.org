title: PenTesting - Kali Linux
description: PenTesting - Kali Linux how to, guides, examples, and simple usage and tools

# Kali Linux

## Tools

### AutoRecon

Based on this repo [Tib3rius/AutoRecon](https://github.com/Tib3rius/AutoRecon)

Install requirements:

```bash
apt-get install -y curl enum4linux gobuster nbtscan nikto nmap onesixtyone oscanner smbclient smbmap smtp-user-enum sslscan tnscmd10g whatweb snmpcheck wkhtmltopdf sipvicious seclists git
```

Clone the repo to desired directory:

```bash
git clone https://github.com/Tib3rius/AutoRecon.git
cd AutoAutoRecon
pip3 install -r requirements.txt
```

### Bettercap 1.6.2 on Any Linux Based System Using Ruby Gem

#### Installation

Install Ruby Gem

```bash
apt-get install ruby-full
apt-get install libpcap-dev
gem update --system
gem install bettercap
```

find where gems are installed:

Run and look for "- GEM PATHS:"

```bash
gem environment
```

follow the path and append gem. for example:

```bash
/var/lib/gems/2.5.0/gems/bettercap-1.6.2
```

Create a environmental symlink to Bettercap to root directory

```bash
ln -s /var/lib/gems/2.5.0/gems/bettercap-1.6.2/bin/bettercap /root/bettercap-1.6.2
```

run from root directory

```bash
./bettercap-1.6.2
```

#### SSL Strip Commands

Change the IP according to you usage

#### Basic SSL Strip

```bash
bettercap-1.6.2 -X -T 192.168.1.104 --proxy
```

#### SSL Strip With XSS

```bash
bettercap-1.6.2 -X -T 192.168.3.104 --proxy --proxy-module injectjs --js-data "<script>alert('SSL STRIP, Script Injection')</script>"
```

## Installing Docker in Kali Linux

Preparation:

Add Docker PGP key, Configure Docker APT repository

```bash
curl -fsSL https://download.docker.com/linux/debian/gpg | apt-key add -
echo 'deb [arch=amd64] https://download.docker.com/linux/debian buster stable' > /etc/apt/sources.list.d/docker.list
apt-get update
```

Install Docker

```bash
apt-get install -y docker-ce
```

Start Docker

```bash
systemctl start docker
```

Enable on Boot

```bash
systemctl enable docker

```

### MobSF - Mobile-Security-Framework-MobSFMobile-Security-Framework-MobSF Docker

Based on [MobSF/Mobile-Security-Framework-MobSF](https://github.com/MobSF/Mobile-Security-Framework-MobSF)

```bash
docker run \
-d \
-it \
-h mobsf \
--name mobsf \
--restart always \
-v /root/shared/mobsfScans:/root/.MobSF \
-e TZ=Asia/Jerusalem \
-p 50000:8000 \
opensecurity/mobile-security-framework-mobsf:latest
```


## Allow Secure SSH to Kali linux

```bash
/etc/ssh/sshd_config
```

Uncomment `PermitRootLogin` and change it to `yes` should look like this:
`PermitRootLogin yes`

Start and enable SHH service on boot

```bash
systemctl start ssh
systemctl enable ssh
```

Try to connect via ssh with user root and its password.

Start SSH service at boot

```bash
sudo systemctl enable ssh.service
```

Reboot, check everything is working.

Follow [SSH_Login_With_RSA_Keys Guide](https://3os.org/en-US/#!pages/linux/general/general.md#SSH_Login_With_RSA_Keys) for securing your ssh login.

## Install OpenVM Tools - VMware Tools

```bash
apt-get install open-vm-tools
```

## Install rtl88xxua-dkms Driver for Wireless Wifi Card

```bash
apt-get install realtek-rtl88xxau-dkms
```

## Auto login ROOT user when VM starts

```bash
nano /etc/gdm3/daemon.conf
```

uncomment:

```bash
  AutomaticLoginEnable = true
  AutomaticLogin = root
```

save and exit.

## Disable Update Notifications

```bash
nano /etc/apt/apt.conf.d/99kali-menu
```

Comment the like this:

```bash
#DPkg::Post-Invoke { "[ ! -x /usr/share/kali-menu/update-kali-menu ] || /usr/share/kali-menu/update-kali-menu wait_dpkg"; }
```

## Installing ADB and Fastboot For Android

```bash
apt-get install lib32z1
apt-get update && apt-get install android-tools-adb android-tools-fastboot
```

## Fix SSH __Broken Pipe__ in Kali

```bash
nano ~/.ssh/config
```

add this:

```bash
Host *
    IPQoS=throughput
```

## Installing Metasploit Framework

```bash
apt-get install metasploit-framewor
systemctl enable postgresql
systemctl start postgresql
msfdb init
msfconsole
```
